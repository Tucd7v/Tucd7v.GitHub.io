{"posts":[{"title":"群晖监视显示屏显示磁盘温度","content":"之前买了个小的3.2寸显示屏 给群晖去显示运行状态，到手后使用卖家提供的文件运行没有任何问题，但我本人想进行一些定制，比如显示硬盘温度，滚动字条之类的。 可是在搜索了一遍lcd4linux相关文档之后...发现作者网站已经全部404了。 好在之后通过webarchive找到了2012年版本的相关文档 🤔 也找到了温度显示的相关配置，但是问题又来了。lcd4linux的硬盘温度显示依赖于一个叫做hddtemp的工具。（这个工具原版也是十年没更新了...） 而群晖并没有这个工具，上篇提到的opkg也并没有这个工具的包，所以就需要下载hddtemp源码 ，手动编译进行安装。 接下来编译需要上篇提到的opkg。建议配置之后再回来进行 连接群晖ssh输入密码登陆后，输入sudo -i获取管理员权限 按顺序输入以下指令 wget http://download.savannah.nongnu.org/releases/hddtemp/&gt; hddtemp-0.3-beta15.tar.bz2 (下载hddtemp源码) tar -jxvf hddtemp-0.3-beta15.tar.bz2 (减压源码到根目录) cd hddtemp-0.3-beta15 (进入减压后的目录) opkg install gcc make (使用opkg安装编译所需工具) ./configure make sudo make install (依次执行 完毕后输入hddtemp应该会有相应提示) 配置hddtemp 首先输入fdisk -l 找到以这种返回样式存在的硬盘 获取对应的路径 图上显示的路径为/dev/sdb记住它 这时获取到硬盘路径后，hddtemp还是不能用 还需要为其搭配一个硬盘信息数据库 按顺序输入 mkdir /usr/share/misc cd /usr/share/misc wget http://download.savannah.nongnu.org/releases/hddtemp/hddtemp.db 执行完毕后 输入hddtemp /dev/sdb 这时返回的信息虽然有了温度显示 但还是有点问题 警告显示此硬盘型号在数据库内不存在，那我们就给数据库里加入相应的硬盘信息 vim /usr/share/misc/hddtemp.db 打开这个文件后...惊了😳里面的硬盘信息可也太老了老吧。怪不得显示不存在 这东西估计08年就停止更新了。 相对应的参数意义我也无法得到 那就只能比葫芦画瓢 拿里面已经存在的信息往新硬盘上去套。 &quot;ST3120215AS&quot; 194 C &quot;Seagate Barracuda 7200.10 SATA 120GB&quot; 比如这个 前面应该是硬盘型号 194这个未知 C是温度的单位 后面是对应的硬盘全称（填写时不冲突即可） 那如果我要把我目前的硬盘添加进去 应该是这种格式 &quot;ST4000VM000-2AF166&quot; 194 C &quot;Seagate 4T&quot; 按下键盘的 i 切换到insert模式 在新一行输入新硬盘的信息 （前面不要加#） 添加完成后 按 ：输入wq保存退出. 这时候再去使用hddtemp 应该就不会提示之前的警告了。 全部配置之后建议输入reboot重启一下群晖 连接到lcd4linux hddtemp -d /dev/* /dev/* /dev/* 使用这条指令来启动远程数据发送 硬盘路径可以多个添加 添加的每一个硬盘路径都需要在之前的硬盘信息数据库内配置 执行之后，打开lcd4linux的配置文件 在“Display Image{}”之后加入以下代码 Widget SmallHDDTemp { //Widget名为SmallHDDTemp，名称可以自行修改 class 'Text' expression hddtemp('/dev/hda') //只可填写一个硬盘的路径 需要多个就创建多个Widget width 4 //宽度 precision 1 //保留一位小数点 如显示整数可以去掉 align 'R' //靠右对其 靠左就是L update tick //每tick更新 官方提供的实例文件包含的变量是每tick是0.5秒更新一次。 } 之后在Layout布局里面编辑 比如我想要让温度在第一行 第六列显示 那就在Layout里输入 Layout layout_400x240{ Row1.Col6 'SmallHDDTemp' } 编辑后killall lcd4linux然后再次运行 没有问题的话温度就显示出来了 如需要自动启动 就在etc/rc.local里，在exit之前新起一行 加入之前输入的指令 比如: hddtemp -d /dev/* /dev/* /dev/* 附上成品图😬 ","link":"https://share.blogtuc.xyz/P6MpFt19k/"},{"title":"为群晖安装包管理器","content":"用过linux的对aptget yum 等包安装管理器肯定会很熟悉 群晖也是基于linux，并且可以连接ssh获取更多系统层面的访问权限。但是进入shell后可用的命令实在太少，有什么方法能完全发挥它的潜力呢？ 可以使用一个轻量化的opkg进行配置 接下来的设置基于DSM6.2进行配置。6.1未尝试过 但是配置应该无较大差异 👇 登陆群晖后台，打开套件中心，点击设置，点击套件来源 添加 https://www.cphub.net/ 添加后返回 点击社群 搜索opkg 安装时只需更改Entware oPKG这个一个选项 其他不需要更改 完成后，打开群晖的ssh功能 在控制面板中打开终端机和SNMP 勾选启用ssh功能 记住端口号。 使用你喜欢的软件登陆到ssh。这里我直接使用“终端”进行登陆（较新版本的Windows10也可直接通过cmd进行连接） 输入： ssh admin@192.168.50.186 -p 2222 ssh 群晖用户名@IP地址 -p 端口号（如果是默认22则不需要加-p） 使用sudo -i切换到管理员权限，密码也是群晖的登陆密码 之后输入opkg update 如果可以正常更新即安装成功 ","link":"https://share.blogtuc.xyz/opkginstall/"}]}